<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>New South Wales State Redistribution 2029</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet-search@4.0.0/dist/leaflet-search.src.css" />
  <script src="https://unpkg.com/leaflet-search@4.0.0/dist/leaflet-search.src.js"></script>
  <link rel="stylesheet" href="css/shared.css" />
  <link rel="icon" href="assets/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="assets/apple-touch-icon.png">
  <meta name="apple-mobile-web-app-title" content="Redistribution"/>
</head>
<body>
  <div style="display:flex; height:100%; width:100%;">
    <aside class="summary-panel">
      <ul id="tab-nav" style="list-style:none;display:flex;margin:0;">
        <li><button type="button" class="button button-grey" onclick="showTab('header-tab')" id="tab-header-btn">Information</button></li>
        <li><button type="button" class="button button-grey" onclick="showTab('divisions-tab')" id="tab-divisions-btn">Divisions</button></li>
        <li style="margin-left:auto;"><a id="home-nav-link" href="index.html" class="button" style="text-decoration:none; display:inline-block;">Home</a></li>
      </ul>
      <section id="header-tab" class="tab-content">
        <div class="header">
          <h1>New South Wales State Redistribution 2029</h1>
          <h3>Context</h3>
          <p>New South Wales is divided into <span id="num-divisions"></span> electoral districts, which must be drawn within 10% of the average district enrolment of <span id="avg-enrol"></span> (ie. between <span id="min-enrol"></span> and <span id="max-enrol"></span>).</p>
          <p>The Redistribution Commission will also consider projected district enrolments, with an aim for districts to also be within <span id="proj-threshold"></span>% of the average projected district enrolment of <span id="avg-projected"></span> in 2030 (ie. between <span id="min-projected"></span> and <span id="max-projected"></span>).</p>
          <p>The ABS divides New South Wales into 524 named Statistical Areas Level 2 (SA2s) which are divided into 15,482 Statistical Areas Level 1 (SA1s). These are the building blocks used to create electoral districts.</p>
          <p>Some SA1s are actually split between multiple districts, however for the purposes of this tool SA1s cannot be split and have been fully placed in the most logical single district. As a result, some districts will have enrolment numbers that slightly differ from the offical figures.</p>
          <div id="shared-instructions"></div>
          <div id="shared-disclaimer"></div>
          <div id="shared-attribution"></div>
        </div>
      </section>
      <section id="divisions-tab" class="tab-content" style="display:none; padding:14px 14px 60px;">
        <div class="division-toolbar" style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:4px; margin-bottom:6px;">
          <button class="button button-ghost" type="button" onclick="resetDivisions()" title="Reset all districts to original configuration">Reset SA1s</button>
          <button class="button button-ghost" type="button" onclick="toggleProjectedThresholds()" title="Toggle projected enrolment quota highlighting">Toggle Projected</button>
          <button class="button button-ghost" type="button" onclick="toggleSpotlight()" id="spotlight-btn" title="Highlight only the selected division">Spotlight</button>
          <button class="button button-ghost" type="button" onclick="exportCSV()" title="Download per-SA1 allocation CSV">Export SA1s</button>
          <button class="button button-ghost" type="button" onclick="exportDivisionTotalsCSV()" title="Download per-district totals CSV">Export Districts</button>
          <button class="button button-ghost" type="button" onclick="triggerImport()" title="Import SA1 allocation CSV">Import</button>
          <input type="file" id="import-file" accept=".csv" style="display:none" />
        </div>
        <div id="header-info"></div>
        <div id="divisions" style="user-select:none;"></div>
      </section>
    </aside>
    <div id="map"></div>
  </div>

  <script>
    window.divisionsAndGroups = [
      { type: "group", name: "Sydney - CBD", divisions: ["Coogee", "Heffron", "Kogarah", "Maroubra", "Rockdale", "Sydney", "Vaucluse"] },
      { type: "division", name: "Coogee" },
      { type: "division", name: "Heffron" },
      { type: "division", name: "Kogarah" },
      { type: "division", name: "Maroubra" },
      { type: "division", name: "Rockdale" },
      { type: "division", name: "Sydney" },
      { type: "division", name: "Vaucluse" },
      { type: "group", name: "Sydney - Inner West", divisions: ["Balmain", "Canterbury", "Drummoyne", "Newtown", "Strathfield", "Summer Hill"] },
      { type: "division", name: "Balmain" },
      { type: "division", name: "Canterbury" },
      { type: "division", name: "Drummoyne" },
      { type: "division", name: "Newtown" },
      { type: "division", name: "Strathfield" },
      { type: "division", name: "Summer Hill" },
      { type: "group", name: "Sydney - North Shore", divisions: ["Davidson", "Epping", "Hornsby", "Lane Cove", "Manly", "North Shore", "Pittwater", "Ryde", "Wahroonga", "Wakehurst", "Willoughby"] },
      { type: "division", name: "Davidson" },
      { type: "division", name: "Epping" },
      { type: "division", name: "Hornsby" },
      { type: "division", name: "Lane Cove" },
      { type: "division", name: "Manly" },
      { type: "division", name: "North Shore" },
      { type: "division", name: "Pittwater" },
      { type: "division", name: "Ryde" },
      { type: "division", name: "Wahroonga" },
      { type: "division", name: "Wakehurst" },
      { type: "division", name: "Willoughby" },
      { type: "group", name: "Sydney - North West", divisions: ["Castle Hill", "Hawkesbury", "Kellyville", "Riverstone", "Winston Hills"] },
      { type: "division", name: "Castle Hill" },
      { type: "division", name: "Hawkesbury" },
      { type: "division", name: "Kellyville" },
      { type: "division", name: "Riverstone" },
      { type: "division", name: "Winston Hills" },
      { type: "group", name: "Sydney - West", divisions: ["Auburn", "Badgerys Creek", "Blacktown", "Blue Mountains", "Fairfield", "Granville", "Leppington", "Londonderry", "Mount Druitt", "Parramatta", "Penrith", "Prospect"] },
      { type: "division", name: "Auburn" },
      { type: "division", name: "Badgerys Creek" },
      { type: "division", name: "Blacktown" },
      { type: "division", name: "Blue Mountains" },
      { type: "division", name: "Fairfield" },
      { type: "division", name: "Granville" },
      { type: "division", name: "Leppington" },
      { type: "division", name: "Londonderry" },
      { type: "division", name: "Mount Druitt" },
      { type: "division", name: "Parramatta" },
      { type: "division", name: "Penrith" },
      { type: "division", name: "Prospect" },
      { type: "group", name: "Sydney - South", divisions: ["Bankstown", "Cabramatta", "Camden", "Campbelltown", "Cronulla", "East Hills", "Holsworthy", "Liverpool", "Macquarie Fields", "Miranda", "Oatley", "Wollondilly"] },
      { type: "division", name: "Bankstown" },
      { type: "division", name: "Cabramatta" },
      { type: "division", name: "Camden" },
      { type: "division", name: "Campbelltown" },
      { type: "division", name: "Cronulla" },
      { type: "division", name: "East Hills" },
      { type: "division", name: "Holsworthy" },
      { type: "division", name: "Liverpool" },
      { type: "division", name: "Macquarie Fields" },
      { type: "division", name: "Miranda" },
      { type: "division", name: "Oatley" },
      { type: "division", name: "Wollondilly" },
      { type: "group", name: "Central Coast & Lower Hunter", divisions: ["Gosford", "Port Stephens", "Terrigal", "The Entrance", "Wyong"] },
      { type: "division", name: "Gosford" },
      { type: "division", name: "Port Stephens" },
      { type: "division", name: "Terrigal" },
      { type: "division", name: "The Entrance" },
      { type: "division", name: "Wyong" },
      { type: "group", name: "Hunter & Upper Hunter", divisions: ["Cessnock", "Charlestown", "Lake Macquarie", "Maitland", "Newcastle", "Northern Tablelands", "Swansea", "Tamworth", "Upper Hunter", "Wallsend"] },
      { type: "division", name: "Cessnock" },
      { type: "division", name: "Charlestown" },
      { type: "division", name: "Lake Macquarie" },
      { type: "division", name: "Maitland" },
      { type: "division", name: "Newcastle" },
      { type: "division", name: "Northern Tablelands" },
      { type: "division", name: "Swansea" },
      { type: "division", name: "Tamworth" },
      { type: "division", name: "Upper Hunter" },
      { type: "division", name: "Wallsend" },
      { type: "group", name: "Mid North Coast & North Coast", divisions: ["Clarence", "Coffs Harbour", "Myall Lakes", "Oxley", "Port Macquarie"] },
      { type: "division", name: "Clarence" },
      { type: "division", name: "Coffs Harbour" },
      { type: "division", name: "Myall Lakes" },
      { type: "division", name: "Oxley" },
      { type: "division", name: "Port Macquarie" },
      { type: "group", name: "Northern Rivers", divisions: ["Ballina", "Lismore", "Tweed"] },
      { type: "division", name: "Ballina" },
      { type: "division", name: "Lismore" },
      { type: "division", name: "Tweed" },
      { type: "group", name: "Illawarra & South Coast", divisions: ["Bega", "Goulburn", "Heathcote", "Keira", "Kiama", "Shellharbour", "South Coast", "Wollongong"] },
      { type: "division", name: "Bega" },
      { type: "division", name: "Goulburn" },
      { type: "division", name: "Heathcote" },
      { type: "division", name: "Keira" },
      { type: "division", name: "Kiama" },
      { type: "division", name: "Shellharbour" },
      { type: "division", name: "South Coast" },
      { type: "division", name: "Wollongong" },
      { type: "group", name: "Riverina & Murray", divisions: ["Albury", "Cootamundra", "Monaro", "Murray", "Wagga Wagga"] },
      { type: "division", name: "Albury" },
      { type: "division", name: "Cootamundra" },
      { type: "division", name: "Monaro" },
      { type: "division", name: "Murray" },
      { type: "division", name: "Wagga Wagga" },
      { type: "group", name: "Central West & Orana", divisions: ["Barwon", "Bathurst", "Dubbo", "Orange"] },
      { type: "division", name: "Barwon" },
      { type: "division", name: "Bathurst" },
      { type: "division", name: "Dubbo" },
      { type: "division", name: "Orange" }
    ];
    window.EVENT_NAME = 'nsw_2029';
    window.NUM_DIVISIONS = 93;
    window.STATE_STARTING_TOTAL = 5217985;
    window.STATE_PROJECTED_TOTAL = 5792158;
    window.DEFAULT_STARTING_COORDS = [-33.00554926499179, 149.64263298797263];
    window.DEFAULT_STARTING_ZOOM = 7;
    window.DIVISION_MAPS = [
      {
        "id": "nsw_2021",
        "path": "data/nsw_2021.js",
        "name": "Current Boundaries"
      },
      {
        "id": "lga_2025_nsw",
        "path": "data/lga_2025_nsw.js",
        "name": "LGA Boundaries"
      }
    ];
  </script>
  <script src="data/sa1_2021_nsw.js"></script>
  <script src="data/sa1_2021_nsw_2021.js"></script>
  <script src="js/snippets.js"></script>
  <script src="js/colors.js"></script>
  <script src="js/shared.js"></script>
  <script>
    showTab('header-tab');
    initSharedApp();
  </script>
</body>
</html>
